<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Garba Tycoon Pro - Version Finale</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { user-select: none; background: #0b0b0d; color: #fff; font-family: sans-serif; margin: 0; overflow: hidden; }
        .tab-content { display: none; height: 78vh; padding: 15px; overflow-y: auto; padding-bottom: 120px; }
        .active { display: block; }
        
        /* CERCLE JAUNE ET IMAGE RONDE FUSIONN√âS */
        .circle-main {
            position: relative; width: 260px; height: 260px;
            margin: 10px auto; border-radius: 50%;
            border: 6px solid #f59e0b; box-shadow: 0 0 25px #f59e0b;
            overflow: hidden; display: flex; align-items: center; justify-content: center;
            background: #1c1c1e; cursor: pointer; transition: transform 0.05s;
        }
        .circle-main:active { transform: scale(0.92); }
        .garba-img { width: 100%; height: 100%; object-fit: cover; }

        /* NAVIGATION BASSE */
        nav { position: fixed; bottom: 0; left: 0; right: 0; background: #111; display: flex; justify-content: space-around; padding: 12px; border-top: 1px solid #333; z-index: 100; }
        .nav-btn { display: flex; flex-direction: column; align-items: center; font-size: 9px; color: #666; font-weight: bold; }
        .nav-btn.active-tab { color: #f59e0b; }

        /* √âNERGIE */
        .energy-fill { transition: width 0.2s; }
    </style>
</head>
<body>

    <div class="p-4 max-w-md mx-auto">
        <div class="flex justify-between items-center mb-4">
            <button onclick="alert('Lien Wallet TON en cours de d√©veloppement...')" class="bg-blue-600 text-white text-[10px] px-4 py-2 rounded-lg font-bold shadow-lg flex items-center gap-1">
                üíé Connect Wallet
            </button>
            <div class="text-right">
                <p class="text-[8px] text-gray-500 font-bold uppercase tracking-wider">Profit / h</p>
                <p id="profit-rate" class="text-green-500 font-bold text-xs">+0</p>
            </div>
        </div>

        <div class="text-center mb-2">
            <h1 id="balance" class="text-5xl font-black tracking-tighter">0</h1>
        </div>

        <div id="exchange" class="tab-content active text-center">
            <div class="bg-[#1c1c1e] p-3 rounded-2xl border border-gray-800 mb-4">
                <div class="flex justify-between items-center">
                    <span class="text-[10px] font-black text-yellow-500 uppercase">Daily Combo</span>
                    <span class="text-white font-bold text-[10px]">üéÅ 5,000,000</span>
                </div>
            </div>

            <div class="circle-main" onclick="handleTap(event)">
                <img src="1770136311457.png" class="garba-img" onerror="this.src='https://cdn-icons-png.flaticon.com/512/1046/1046788.png'">
            </div>

            <div class="mt-6">
                <p class="text-yellow-500 font-black text-lg">‚ö° <span id="energy-text">1000 / 1000</span></p>
                <div class="w-64 h-2.5 bg-gray-800 rounded-full mx-auto mt-2 overflow-hidden">
                    <div id="energy-fill" class="h-full bg-yellow-500 energy-fill" style="width: 100%"></div>
                </div>
            </div>
        </div>

        <div id="mine" class="tab-content">
            <h2 class="text-center font-black text-gray-500 text-xs mb-6 uppercase">March√© & Investissements</h2>
            <div id="cards-container" class="grid grid-cols-2 gap-3">
                </div>
        </div>

        <div id="tasks" class="tab-content">
            <h2 class="text-center font-black text-yellow-500 text-sm mb-6 uppercase">Missions</h2>
            <div class="space-y-3">
                <div class="bg-[#1c1c1e] p-4 rounded-2xl border border-gray-800 flex justify-between items-center">
                    <div class="flex items-center gap-3"><span>üì¢</span><p class="text-xs font-bold">Canal Telegram</p></div>
                    <button onclick="window.open('https://t.me/TON_CANAL')" class="bg-white text-black text-[10px] px-4 py-1.5 rounded-lg font-bold">GO</button>
                </div>
                <div class="bg-[#1c1c1e] p-4 rounded-2xl border border-gray-800 flex justify-between items-center">
                    <div class="flex items-center gap-3"><span>üü¢</span><p class="text-xs font-bold">Groupe WhatsApp</p></div>
                    <button onclick="window.open('https://wa.me/TON_GROUPE')" class="bg-white text-black text-[10px] px-4 py-1.5 rounded-lg font-bold">GO</button>
                </div>
            </div>
        </div>

        <div id="boost" class="tab-content text-center">
            <h2 class="text-xl font-black mb-8">BOOST TA FORTUNE</h2>
            <div class="bg-[#1c1c1e] p-6 rounded-3xl border border-yellow-600/30 shadow-xl">
                <span class="text-5xl">üì∫</span>
                <h3 class="text-lg font-bold mt-4">Regarder une Vid√©o</h3>
                <p class="text-gray-400 text-xs mt-2 mb-6">Regarde la pub Monetag et gagne 5,000 points imm√©diatement !</p>
                <button onclick="watchAd()" class="w-full bg-yellow-600 text-black font-black py-4 rounded-2xl active:scale-95 transition uppercase">
                    Voir la Pub (+5000)
                </button>
                <p id="ad-timer" class="text-[10px] text-gray-500 mt-4"></p>
            </div>
        </div>
    </div>

    <nav>
        <button onclick="showTab('exchange')" class="nav-btn active-tab" id="btn-exchange">üè†<span>Accueil</span></button>
        <button onclick="showTab('mine')" class="nav-btn" id="btn-mine">‚õèÔ∏è<span>Mine</span></button>
        <button onclick="showTab('tasks')" class="nav-btn" id="btn-tasks">üì¢<span>Missions</span></button>
        <button onclick="showTab('boost')" class="nav-btn" id="btn-boost">üöÄ<span>Boost</span></button>
    </nav>

    <script>
        // CONFIGURATION
        const MONETAG_LINK = "https://otieu.com/4/10555812";
        
        let state = JSON.parse(localStorage.getItem('garba_final_v1')) || {
            bal: 0, energy: 1000, maxE: 1000, profit: 0, lastAd: 0,
            cards: [
                { id: 1, name: "Poisson Thon", price: 1000, profit: 120, img: "üêü" },
                { id: 2, name: "Huile de Palme", price: 5000, profit: 550, img: "üß¥" },
                { id: 3, name: "Gros Charbon", price: 15000, profit: 1800, img: "üî•" }
            ]
        };

        function save() { localStorage.setItem('garba_final_v1', JSON.stringify(state)); }

        // VIBRATION + CLIC
        function handleTap(e) {
            if (state.energy >= 1) {
                state.bal += 1;
                state.energy -= 1;
                if (navigator.vibrate) navigator.vibrate(50);
                updateUI();
                save();
            }
        }

        // PUBLICIT√â MONETAG
        function watchAd() {
            const now = Date.now();
            const waitTime = 5 * 60 * 1000; 

            if (now - state.lastAd < waitTime) {
                const reste = Math.ceil((waitTime - (now - state.lastAd)) / 60000);
                alert(`Patiente encore ${reste} minutes !`);
                return;
            }

            window.open(MONETAG_LINK, "_blank");
            state.bal += 5000;
            state.lastAd = now;
            updateUI();
            save();
            alert("Merci ! +5,000 points ajout√©s.");
        }

        function showTab(id) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active-tab'));
            document.getElementById('btn-'+id).classList.add('active-tab');
            if(id === 'mine') renderCards();
        }

        function renderCards() {
            const container = document.getElementById('cards-container');
            container.innerHTML = state.cards.map(c => `
                <div onclick="buyCard(${c.id})" class="bg-[#1c1c1e] p-4 rounded-2xl border border-gray-800 text-center">
                    <span class="text-3xl">${c.img}</span>
                    <p class="text-[10px] font-black mt-2 uppercase">${c.name}</p>
                    <p class="text-[9px] text-green-500 font-bold">+${c.profit}/h</p>
                    <button class="w-full bg-yellow-600 text-black text-[10px] py-2 mt-3 rounded-xl font-black">${c.price.toLocaleString()}</button>
                </div>
            `).join('');
        }

        function buyCard(id) {
            const c = state.cards.find(x => x.
            
