<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Garba King Official</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* DESIGN MONSTER COMBAT STYLE */
        body { 
            margin: 0; padding: 0; 
            background: #120b1e url('LIEN_DE_TON_IMAGE_DE_FOND') no-repeat center center; 
            background-size: cover;
            font-family: 'Arial', sans-serif;
            color: white;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Barre du haut */
        .header {
            width: 100%;
            text-align: center;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
            padding-bottom: 20px;
        }

        #logo-king {
            width: 220px;
            margin-top: 15px;
            filter: drop-shadow(0 0 10px #ffcc00);
        }

        .stats-panel {
            display: flex;
            justify-content: space-around;
            background: rgba(45, 30, 70, 0.8);
            margin: 10px 15px;
            padding: 12px;
            border-radius: 12px;
            border: 1px solid #4a3475;
            font-weight: bold;
            font-size: 14px;
        }

        /* Zone de jeu */
        .game-container {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .coin {
            width: 260px;
            cursor: pointer;
            transition: transform 0.05s ease-out;
            filter: drop-shadow(0 0 40px rgba(255, 204, 0, 0.3));
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        .coin:active {
            transform: scale(0.92);
        }

        /* Bouton Battle */
        .battle-section {
            text-align: center;
            padding-bottom: 90px;
        }

        .btn-battle {
            background: linear-gradient(to bottom, #ffcc00, #d4a000);
            color: #1a1625;
            padding: 12px 40px;
            border-radius: 10px;
            font-weight: 900;
            font-size: 18px;
            border: none;
            box-shadow: 0 4px 0 #8a6800;
            text-transform: uppercase;
        }

        /* Menu du bas */
        .nav-bar {
            position: fixed;
            bottom: 0;
            width: 100%;
            background: #1a1625;
            display: flex;
            justify-content: space-around;
            padding: 15px 0;
            border-top: 2px solid #3d2a5a;
            z-index: 100;
        }

        .nav-item {
            text-align: center;
            font-size: 10px;
            color: #8a70b5;
        }

        .nav-item span { font-size: 20px; display: block; margin-bottom: 4px; }
    </style>
</head>
<body>

    <div class="header">
        <img id="logo-king" src="LIEN_DE_TON_LOGO" alt="GARBA KING">
        <div class="stats-panel">
            <span>LVL 5</span>
            <span style="color: #ffcc00;">üí∞ <span id="count">0</span></span>
            <span style="color: #00e5ff;">üíé 200</span>
        </div>
    </div>
    
    <div class="game-container">
        <img id="coin-g" class="coin" src="LIEN_DE_TA_PIECE_G" alt="Piece G">
    </div>

    <div class="battle-section">
        <button class="btn-battle">BATTLE!</button>
    </div>
    
    <div class="nav-bar">
        <div class="nav-item"><span>üè†</span>Home</div>
        <div class="nav-item"><span>üëæ</span>Collection</div>
        <div class="nav-item"><span>üë§</span>Account</div>
        <div class="nav-item"><span>üõí</span>Shop</div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // Ta config Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyAvXVAZhasqI_GqGpFyyClvr2JeakfqlVU",
            authDomain: "garbaking-5f435.firebaseapp.com",
            projectId: "garbaking-5f435",
            storageBucket: "garbaking-5f435.appspot.com",
            databaseURL: "https://garbaking-5f435-default-rtdb.firebaseio.com/"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const tg = window.Telegram.WebApp;
        tg.expand(); // Ouvre le jeu en grand sur Telegram

        const userId = tg.initDataUnsafe?.user?.id || "joueur_local";
        const scoreRef = ref(db, 'users/' + userId);

        let score = 0;

        // Charger le score
        onValue(scoreRef, (snapshot) => {
            const data = snapshot.val();
            if (data) {
                score = data.points || 0;
                document.getElementById('count').innerText = score.toLocaleString();
            }
        });

        // Clique sur la pi√®ce
        document.getElementById('coin-g').onclick = (e) => {
            score++;
            document.getElementById('count').innerText = score.toLocaleString();
            
            // Vibration
            if (tg.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('medium');
            }

            // Sauvegarde
            set(scoreRef, {
                points: score,
                nom: tg.initDataUnsafe?.user?.first_name || "Anonyme"
            });
        };
    </script>
</body>
</html>
